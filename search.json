[
  {
    "objectID": "src/seminaire-dms/index.html#origine-du-projet",
    "href": "src/seminaire-dms/index.html#origine-du-projet",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Origine du projet",
    "text": "Origine du projet\n\nBesoin d’un référentiel complet, stable, fiable, mis à jour.\nFaciliter la gestion des adresses au sein du SSP.\nClients : Résil, Géoloc, DMTR…\n\nGaïa : Référentiel Géographique d’Adresses avec Informations Géolocalisantes.\n\nParler de l’origine du projet, quand ca a été mis en place, comment, pq…"
  },
  {
    "objectID": "src/seminaire-dms/index.html#une-adresse",
    "href": "src/seminaire-dms/index.html#une-adresse",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Une adresse",
    "text": "Une adresse\n\n\n\n\n\n20 bis avenue de la marne 92049"
  },
  {
    "objectID": "src/seminaire-dms/index.html#géométrie-de-ladresse",
    "href": "src/seminaire-dms/index.html#géométrie-de-ladresse",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Géométrie de l’adresse",
    "text": "Géométrie de l’adresse\nExemple: “88 avenue verdier | 92049” reliée à sa parcelle"
  },
  {
    "objectID": "src/seminaire-dms/index.html#le-référentiel-gaïa",
    "href": "src/seminaire-dms/index.html#le-référentiel-gaïa",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Le référentiel Gaïa",
    "text": "Le référentiel Gaïa\n\n\nAutres données disponibles (aspect géométrique des objets) :\n\nPour chaque adresse Gaïa : point gps, lien parcelle.\n\nPour chaque commune Gaïa : polygone."
  },
  {
    "objectID": "src/seminaire-dms/index.html#identifiants-gaïa",
    "href": "src/seminaire-dms/index.html#identifiants-gaïa",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Identifiants Gaïa",
    "text": "Identifiants Gaïa\nIdentifiant unique et stable pour assurer le suivi des objets dans le temps.\n\nTrois niveaux :\n\nIdentifiant adresse\nIdentifiant voie\nIdentifiant commune\n\n\nGestion des scissions et fusions de communes."
  },
  {
    "objectID": "src/seminaire-dms/index.html#construction-du-référentiel",
    "href": "src/seminaire-dms/index.html#construction-du-référentiel",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Construction du référentiel",
    "text": "Construction du référentiel\nSources fiables :\n\nMajic : Mise à jour des informations cadastrales.\n\nBAN : Base Adresse Nationale.\n\nRCA : Référentiel Commun d’Adresses.\n\n\nAu moins une mise à jour par trimestre (avec conservation des identifiants Gaïa).\n\nUne mise à jour :\n\nRécupérer la nouvelle base d’une source données.\n\nIdentifier les adresses textuellement :\n\n\n\nLes adresses qui sont retrouvées sont alors modifiées si des nouveautés apparaissent.\n\nLes adresses non retrouvées entraînent la création de nouveaux objets Gaïa.\nL’étape d’identification des adresses permet de ne pas écraser les identifiants Gaïa."
  },
  {
    "objectID": "src/seminaire-dms/index.html#dautres-données",
    "href": "src/seminaire-dms/index.html#dautres-données",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "D’autres données",
    "text": "D’autres données\n\nPolygones du bâti.\n\nPolygones Parcelles du cadastre.\n\nPolygones QPV, zonages infra, iris.\n\nPas d’identifiant Gaïa, donc pas de suivi dans le temps de ces objets."
  },
  {
    "objectID": "src/seminaire-dms/index.html#exemples-de-géométries",
    "href": "src/seminaire-dms/index.html#exemples-de-géométries",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Exemples de géométries",
    "text": "Exemples de géométries\nAdresses, parcelles et bâtis :"
  },
  {
    "objectID": "src/seminaire-dms/index.html#quelques-métriques-sur-le-référentiel",
    "href": "src/seminaire-dms/index.html#quelques-métriques-sur-le-référentiel",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Quelques métriques sur le référentiel",
    "text": "Quelques métriques sur le référentiel\n\nNombre d’adresses ≃ 27 millions.\n\nNombre de voies ≃ 3 millions."
  },
  {
    "objectID": "src/seminaire-dms/index.html#différents-besoins-au-sein-du-ssp",
    "href": "src/seminaire-dms/index.html#différents-besoins-au-sein-du-ssp",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Différents besoins au sein du SSP",
    "text": "Différents besoins au sein du SSP\n\nRésil :\n\nIdentification de(s) adresse(s) des individus.\n\nRegroupement des adresses avec différents identifiants Gaïa mais qui représentent le même lieu.\n\nGéoloc : identification du référentiel Géoloc et génération de leur nouveau référentiel.\n\nAutres utilisateurs possibles :\n\nIdentification des adresses sur les certificats de décès.\n\nIdentification des adresses de Sirus."
  },
  {
    "objectID": "src/seminaire-dms/index.html#besoin-didentification-des-adresses-textuelles",
    "href": "src/seminaire-dms/index.html#besoin-didentification-des-adresses-textuelles",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Besoin d’identification des adresses textuelles",
    "text": "Besoin d’identification des adresses textuelles\nTrouver l’identifiant d’adresse à partir d’un libellé d’adresse plus ou moins correcte.\n\nBesoin visiblement récurrent au sein du SSP.\n\nIndispensable pour construire et mettre à jour le référentiel.\n\nIl faut donc un moteur de recherche ⚙️."
  },
  {
    "objectID": "src/seminaire-dms/index.html#adresses-à-retrouver-dans-gaïa",
    "href": "src/seminaire-dms/index.html#adresses-à-retrouver-dans-gaïa",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Adresses à retrouver dans Gaïa",
    "text": "Adresses à retrouver dans Gaïa\nExemple d’adresses à retrouver :\n\n\n\n\n\n\n\n\n\nAdresse à retrouver\nCOG\nCode Postal\nLibellé commune\n\n\n\n\n131, rue du fbg Bannier\n\n45000\nOrléans\n\n\n0033 ave J. Jaurès\n92040\n\n\n\n\n\nAdresses dans Gaïa :\n\n\n\nAdresse\nCOG\n\n\n\n\n131 rue du faubourg bannier\n45234\n\n\n33 avenue jean jaures\n92040\n\n\n\n\nC’est pourquoi il faut un moteur de recherche ⚙️."
  },
  {
    "objectID": "src/seminaire-dms/index.html#un-moteur-de-recherche",
    "href": "src/seminaire-dms/index.html#un-moteur-de-recherche",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Un moteur de recherche ⚙️",
    "text": "Un moteur de recherche ⚙️\n\nGoogle : recherche par mot clé sur internet.\n\nMoteur de recherche de l’intranet de l’Insee.\n\nPour la recherche d’adresse :\n\nGoogle Maps.\nAddok : moteur de recherche de la BAN.\n\n\n\n\n\nQuand on pense à moteur de recherche, on pense tout de suite à Google.\nUn moteur de recherche est un outil qui permet de retrouver des informations en effectuant des requêtes dans une base de données. On peut rechercher avec des mots-clés ou des textes similaires à ceux présents dans la base, grâce à des techniques de recherche approximative.\nIl y a des moteurs de recherche partout, par exemple intranet de l’insee, windows pour chercher des applications, l’explorateur de fichiers sur votre ordinateur en local…\nUn moteur ne sert pas qu’à chercher sur internet, c’est tout simplement de la recherche dans une base de données. Mais internet a permis des avancées majeures sur les moteurs, car la recherche sur le web devenait un sujet de plus en plus important. Avec le démultiplication de l’information, difficile de chercher dans une grande bdd et trouver le résultat le plus pertinent.\nPour avoir le maximum de résultats pertients, il faut non seulement avoir un moteur performant, il faut aussi avoir les bonnes données. C’est en recrutant un étudiant du MIT qui a développé une méthode révolutionnaire pour recenser automatiquement les sites sur le web (auparavant fait manuellement), que google va se démarquer des autres moteurs.\n1er moteur de recherche Archie 1990. Yahoo 1994, Google 1998, google maps 2004.\nGoogle maps : api payant, pas la main sur les données.\n\nGoogle Maps utilise des technologies avancées mais on peut reproduire la logique avec ElasticSearch.\n\nAddok : DINUM.\n\nOn va regarder les avantages et les inconvients de d’elastic et d’addok dans la suite."
  },
  {
    "objectID": "src/seminaire-dms/index.html#elasticsearch",
    "href": "src/seminaire-dms/index.html#elasticsearch",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "ElasticSearch",
    "text": "ElasticSearch\n\nCréé en 2010 par Shay Bannon.\n\nFaire des recherches rapides sur tout type de données.\n\nMoteur ⚙️ utilisable en n’importe quel langage de programmation (requêtes HTTP).\n\nElasticSearch au sein de l’Insee :\n\n\n\nPour trier et chercher les recettes de cuisine de sa femme psq il trouvait pas de moteur de recherche adapté.\n1er moteur Elasticsearch de l’insee : Code statistique Non Signifiant, identifier les individus à partir de ses données d’état civil.\nRésil : prolongement du moteur CSNS, améliorer la qualité du moteur CSNS, en utilisant les informations identifiantes supplémentaires disponibles dans Résil, notamment l’adresse de résidence et les cohabitants."
  },
  {
    "objectID": "src/seminaire-dms/index.html#cest-quoi-concrètement-elasticsearch",
    "href": "src/seminaire-dms/index.html#cest-quoi-concrètement-elasticsearch",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "C’est quoi concrètement ElasticSearch ?",
    "text": "C’est quoi concrètement ElasticSearch ?\n\nElasticSearch : logiciel pour l’indexation et la recherche de données.\nUtilisation en pratique avec Python : packages elasticsearch et elasticsearch-dsl."
  },
  {
    "objectID": "src/seminaire-dms/index.html#pourquoi-elasticsearch-pour-la-recherche-textuelle",
    "href": "src/seminaire-dms/index.html#pourquoi-elasticsearch-pour-la-recherche-textuelle",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Pourquoi ElasticSearch pour la recherche textuelle ?",
    "text": "Pourquoi ElasticSearch pour la recherche textuelle ?\n\n\n\n\n\n\n\n\n\nCritères\nElasticSearch\nSQL\nAddok\n\n\n\n\nRecherche de texte avancée\n✅\n❌\n✅\n\n\nPersonnalisation des recherches\n✅\n❌\n⚠️\n\n\nRapidité\n✅\n✅\n✅\n\n\nPrécision\n✅\n❌\n⚠️\n\n\nFacilité d’implémentation\n❌\n✅\n✅\n\n\nMaintenance\n⚠️\n✅\n❌\n\n\n\n\n\nAddok (DINUM) : code python pour indexer des données d’adresses avec point gps et recherche les adresses avec des requêtes fixées.\n\nAddok est un moteur de recherche open source conçu pour effectuer des tâches de géocodage. Il n’utilise pas Elasticsearch."
  },
  {
    "objectID": "src/seminaire-dms/index.html#filtres",
    "href": "src/seminaire-dms/index.html#filtres",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Filtres",
    "text": "Filtres\n\n\nNormaliser le texte pour la comparaison.\n\nPour les données du référentiel ET pour les adresses recherchées."
  },
  {
    "objectID": "src/seminaire-dms/index.html#filtres-implémentés",
    "href": "src/seminaire-dms/index.html#filtres-implémentés",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Filtres implémentés",
    "text": "Filtres implémentés\n\nLowercase\n\nAsciifolding\n\nPonctuation\n\nSéparation des nombres et lettres (ex : 1er → 1 er)\n\nSuppression des “0” devant les nombres (ex : 0033 → 33)\n\nPrise en compte des synonymes (ex : ave = avenue, st = saint)"
  },
  {
    "objectID": "src/seminaire-dms/index.html#base-de-données-classique",
    "href": "src/seminaire-dms/index.html#base-de-données-classique",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Base de données classique",
    "text": "Base de données classique\nExemple\n\n\n\nidVoie\nnom de voie\n\n\n\n\nA\ndu general leclerc\n\n\nB\ndu general charles de gaulle\n\n\nC\ndu point du jour\n\n\nD\nverdier\n\n\nE\ndes cours\n\n\n\n\nNous allons faire un focus sur uniquement le “nom de voie” pour simplifier la compréhension de la théorie du moteur."
  },
  {
    "objectID": "src/seminaire-dms/index.html#recherche-par-mot",
    "href": "src/seminaire-dms/index.html#recherche-par-mot",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Recherche par mot",
    "text": "Recherche par mot\nPour chaque nom de voie du référentiel, compter le nombre de mots qui sont retrouvés dans l’adresse recherchée : les matchs 🎯.\nExemple : score avec tokenizer “mot” de “45 avenue du general charles de gaulle”\n\n\n\nidVoie\nnom de voie\nscore\n\n\n\n\nA\ndu general leclerc\n2\n\n\nB\ndu general charles de gaulle\n5\n\n\nC\ndu point du jour\n2\n\n\nD\nverdier\n0\n\n\nE\ndes cours\n0\n\n\n\n\n\nUn match c’est chercher si une sous chaine du nom de voie, ici un mot, est incluse dans l’adresse recherchée.\n\nRecherche par groupes de caractères également possible, abordée dans la suite."
  },
  {
    "objectID": "src/seminaire-dms/index.html#score-avec-tokenizer-mot",
    "href": "src/seminaire-dms/index.html#score-avec-tokenizer-mot",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Score avec tokenizer “mot”",
    "text": "Score avec tokenizer “mot”\nTokenizer = façon de découper le texte recherché et ciblé.\n\nPour retourner la voie la plus pertinente, on construit un score pour chaque voie : \\[\nscore_{voie} = \\sum_{\\text{∀m} \\in \\text{M}} {nb\\_occurrence}_m\n\\]\nm = mot.\nM = ensemble des mots de l’adresse recherchée.\nDans une grande base de données, c’est extrêmement long.\n\nPour palier à ces temps de traitement qui explosent, on peut utiliser un nouvel outil qui permet de réorganiser nos bases de données : l’index inversé."
  },
  {
    "objectID": "src/seminaire-dms/index.html#index-inversé-mot",
    "href": "src/seminaire-dms/index.html#index-inversé-mot",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Index inversé mot",
    "text": "Index inversé mot\nExemple\n\n\n\n\n\n\nidVoie\n\n\nnom de voie\n\n\n\n\n\n\nA\n\n\ndu general leclerc\n\n\n\n\nB\n\n\ndu general charles de gaulle\n\n\n\n\nC\n\n\ndu point du jour\n\n\n\n\nD\n\n\nverdier\n\n\n\n\nE\n\n\ndes cours\n\n\n\n\n\n\n\n\n\n\n\n\nmot\n\n\noccurrences\n\n\n\n\n\n\ngeneral\n\n\n{“A”: 1, “B”: 1}\n\n\n\n\njour\n\n\n{“C”: 1}\n\n\n\n\ndu\n\n\n{“A”: 1, “B”: 1, “C”: 2}\n\n\n\n\ncours\n\n\n{“E”: 1}\n\n\n\n\n…\n\n\n…\n\n\n\n\n\nComptage direct ⚡ des occurrences de chaque mot de la base par idVoie.\n\n\nFaire un index inversé par mot, c’est récupérer tous les mots des noms de voie dans le référentiel et on les aplati dans une colonne.\n\nIl y a autant de lignes qu’il y a de mots différents dans les noms de voie du référentiel. Les mots les plus fréquents seront ceux qui ont le plus d’occurences.\n\nNous obtenons directement le comptage de chaque mot par idVoie.\n\nL’index inversé est fait en amont des recherches."
  },
  {
    "objectID": "src/seminaire-dms/index.html#fuzziness",
    "href": "src/seminaire-dms/index.html#fuzziness",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Fuzziness",
    "text": "Fuzziness\nContourner les petites fautes d’orthographes : fuzziness.\nPour matcher 🎯 deux mots avec une fuzziness de niveau 1 = corriger l’un des mots :\n\nAjout d’une lettre. Ex: “verdiier”\n\nSuppression d’une lettre. Ex: “verdie”\n\nRemplacement d’une lettre. Ex: “verfier”\n\nÉchanger deux lettres de place. Ex: “evrdier”\n\nIl est possible de comparer deux textes, deux n-grams ou n’importe quel autre groupe de caractères.\n\nLa fuzziness n’est pas un tokenizer, une facon de decouper, c’est plutot une option qu’on rajoute pour matcher des sous chaine, peu importe le decoupage."
  },
  {
    "objectID": "src/seminaire-dms/index.html#une-autre-façon-de-découper-les-n-grams",
    "href": "src/seminaire-dms/index.html#une-autre-façon-de-découper-les-n-grams",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Une autre façon de découper : les n-grams",
    "text": "Une autre façon de découper : les n-grams\nPrendre en compte les correspondances partielles : chaque mot est découpé en sous-chaînes de n caractères consécutifs.\n\nExemple de découpage en 3-grams de caractères du texte “avenue verdier” :\nave, ven, enu, nue, ver, erd, rdi, die, ier\n\nSi un mot est inférieur à la taille n, il n’aura pas de découpage en n-grams → pas présent dans l’index inversé n-gram."
  },
  {
    "objectID": "src/seminaire-dms/index.html#index-inversé-3-grams",
    "href": "src/seminaire-dms/index.html#index-inversé-3-grams",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Index inversé 3-grams",
    "text": "Index inversé 3-grams\nExemple\n\n\n\n\n\n\nidVoie\n\n\nnom de voie\n\n\n\n\n\n\nA\n\n\ndu general leclerc\n\n\n\n\nB\n\n\ndu general charles de gaulle\n\n\n\n\nC\n\n\ndu point du jour\n\n\n\n\nD\n\n\nverdier\n\n\n\n\nE\n\n\ndes cours\n\n\n\n\n\n\n\n\n\n\n\n\n3-gram\n\n\noccurrences\n\n\n\n\n\n\ngen\n\n\n{“A”: 1, “B”: 1}\n\n\n\n\ncha\n\n\n{“B”: 1}\n\n\n\n\nour\n\n\n{“C”: 1, “E”: 1}\n\n\n\n\noin\n\n\n{“C”: 1}\n\n\n\n\n…\n\n\n…\n\n\n\n\n\n\n\nIl y a autant de lignes qu’il ya de trigrams différents dans les noms de voie du référentiel.\n\nSi un mot est inférieur à la taille n=3, il ne sera pas pris en compte. Par exemple : du général de gaules, “du” et “de” n’apparaîtront pas dans l’index et donc ne seront pas pris en compte dans les matchs trigrams."
  },
  {
    "objectID": "src/seminaire-dms/index.html#score-avec-tokenizer-n-grams",
    "href": "src/seminaire-dms/index.html#score-avec-tokenizer-n-grams",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Score avec tokenizer “n-grams”",
    "text": "Score avec tokenizer “n-grams”\nScore pour chaque voie : \\[\nscore_{voie} = \\sum_{\\text{∀ngram} \\in \\text{N}} {nb\\_occurrence}_{ngram}\n\\]\nN = ensemble des n-grams de l’adresse recherchée."
  },
  {
    "objectID": "src/seminaire-dms/index.html#limites-des-n-grams",
    "href": "src/seminaire-dms/index.html#limites-des-n-grams",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Limites des n-grams",
    "text": "Limites des n-grams\n\\[\n\\downarrow \\text{taille n-grams}\n\\Rightarrow \\text{taille index inversé} \\uparrow\n\\Rightarrow \\text{temps de recherche} \\uparrow\n\\]\n\nLimitation à n∈{3,4,5} pour notre cas.\n\nTests effectués pour choisir ces valeurs, en fonction de la précision et la rapidité des requêtes.\n\n\nDonc avec tous ces éléments, on peut commencer à construire un score de plus en plus efficient pour trouver la voie la plus pertiente."
  },
  {
    "objectID": "src/seminaire-dms/index.html#score-global",
    "href": "src/seminaire-dms/index.html#score-global",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Score global",
    "text": "Score global\nLe score global va donc combiner la somme des matchs 🎯 au niveau :\n\nmot avec fuzziness.\n\nn-grams.\n\nmais également texte entier sans découpage !\n\n\nIl est possible de donner plus ou moins d’importance à ces différents niveaux de matchs 🎯.\n\n\nOn va chercher le nom de voie tel quel, sans découpage, au sein de l’adresse recherchée.\nC’est pourquoi on va introduire la notion de boost."
  },
  {
    "objectID": "src/seminaire-dms/index.html#boost",
    "href": "src/seminaire-dms/index.html#boost",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Boost 🚀",
    "text": "Boost 🚀\n\nChaque occurrence est multipliée par un facteur, appelé boost 🚀, qui dépend du niveau de match 🎯.\n\nPersonnalisation des boosts 🚀 pour être adapté aux données recherchées.\n\n\nAvec tous ces outils la, on peut faire une recherche !"
  },
  {
    "objectID": "src/seminaire-dms/index.html#faire-des-recherches",
    "href": "src/seminaire-dms/index.html#faire-des-recherches",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Faire des recherches 🔍",
    "text": "Faire des recherches 🔍\nRequête 🔍 pour retrouver la voie :\nÀ chaque match 🎯, le score va ⇡ en fonction du boost 🚀 associé.\n\n\n\nVariable\nTokenizer\nFuzzi 1\nBoost 🚀\n\n\n\n\nNom de voie\nSans découpage\n✅\n200\n\n\nNom de voie\nMot\n✅\n15\n\n\nType de voie\nMot\n✅\n5\n\n\nNom de voie\n3 à 5-grams\n❌\n1\n\n\n\nEx boost 200 : “3 rue du genral de gaulle” ⊃ “du general de gaulle”\n\n\nRequete gaia pour retrouver la voie.\n\nIci, on introduit le type de voie qui n’a pas été vu précédement, pour ne pas compliquer la compréhension de la théorie du moteur, mais la logique reste la meme que pour le nom de voie.\n\nAttention, pas de fuzzi sur les ngrams car on juge que les sous chaines sont déjà assez petites, c’est contre productif pour la rapidité et la précision des recherches d’ajouter de la fuzzi.\n\nIl faut noter qu’on match à chaque sous-chaine, par exemple à chaque 3-grams de verdier dans 88 avenue verdier.\n\nLes ngrams c’est notre dernier recours, on va retourner comme voie plus pertinente les match sur nom de voie complet et sur token mais ngrams c’est notre roue de secours."
  },
  {
    "objectID": "src/seminaire-dms/index.html#retour-sur-le-score-global",
    "href": "src/seminaire-dms/index.html#retour-sur-le-score-global",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Retour sur le score global",
    "text": "Retour sur le score global\n\\[\nscore_{voie} = \\sum_{\\text{∀n} \\in \\text{N}} \\sum_{\\text{∀t} \\in \\text{n}} boost_{n}*{nb\\_occurrence}_{t}\n\\]\nN = ensemble des niveaux (niveau chaîne complète fuzzi, niveau mot fuzzi…).\nn = niveau.\nt = token, sous-chaîne (un mot, un 3-grams…).\n\n\nFormule mathématique du score pour retrouver la voie la plus pertiente dans Gaïa.\nMaintenant, on est capable de retrouver la voie la plus pertinente, mais qu’est ce qu’il en est de l’adresse ? Regardons l’algorithme d’identification d’adresse de Gaïa."
  },
  {
    "objectID": "src/seminaire-dms/index.html#algorithme-didentification-dadresses-1",
    "href": "src/seminaire-dms/index.html#algorithme-didentification-dadresses-1",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Algorithme d’identification d’adresses",
    "text": "Algorithme d’identification d’adresses\n\nPrends en entrée un libellé d’adresse et un COG, ou à défaut, un code postal + libellé commune.\n\nRetourne :\n\nle(s) identifiant(s) Gaïa retrouvé(s).\n\nune indicatrice sur la qualité de l’identification (0 à 10).\n\nun ratio qui mesure l’écart entre la 1ère et la 2ème voie la plus pertinente retournées par Elastic (0 à 1)."
  },
  {
    "objectID": "src/seminaire-dms/index.html#schéma-algorithme-didentification",
    "href": "src/seminaire-dms/index.html#schéma-algorithme-didentification",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Schéma algorithme d’identification",
    "text": "Schéma algorithme d’identification\n\n\n\nEntre chaque requête Elastic, il y a des étapes de validation du résultat ES qui sont font en aval.\n\nIdentification adresse stricte : une recherche l’adresse comme un appariement direct avec notre référentiel Gaïa, tout en passant via le moteur ElasticSearch pour avoir les filtres et les synonymes montrés précédemment.\n\nEn moyenne, sur une base de données d’adresses non normalisées, il y a 30% des adresses qui passent à la première étape de l’identification. Cette identification stricte permet donc d’accélerer le processus, car ca prend 6 fois moins de temps de faire une recherche stricte plutot qu’une recherhce floue.\n\nComme les bases de données qui alimentent notre référentiel sont plutôt normalisées, cela accélère d’autant plus notre processus d’identification.\n\nensuite voie floue puis simplement numéro et indice de répétition, pas besoin de faire autant d’ingénieurie que pour retrouver la voie ici.\n\nLa validation de la voie retrouvée va être présentée juste après, et d’ailleurs l’indicatrice qualité va dépendre de la validation de la voie."
  },
  {
    "objectID": "src/seminaire-dms/index.html#indicatrice-qualité",
    "href": "src/seminaire-dms/index.html#indicatrice-qualité",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Indicatrice qualité",
    "text": "Indicatrice qualité\n\nDépend du pourcentage de 3-grams de la voie du référentiel ⊂ l’adresse recherchée.\nCalcul non réalisable avec Elastic, donc effectué post requête.\n\n\n\n\nVoie qualifiée de\nPourcentage de 3-grams\n\n\n\n\nsûre\n≥ 65%\n\n\npeu douteuse\n35% ≤ x &lt; 65%\n\n\ndouteuse\n10% ≤ x &lt; 35%\n\n\nnon retrouvée\n&lt; 10%\n\n\n\nExemple : 80% des 3-grams de “verdier” dans “88 avenue verdie”.\n\n\nLe trigram “ier” n’est jamais matché\n\nverdier : 5 trigrams\n\n4 trigrams retrouvés dans 88 avenue verdier\n\n4*100/5 = 80\nCes valeurs n’ont pas été choisies aux hasard, elles ont été calculées grâce au jeu de test que nous allons vous présenter ensuite. Et nous avons regardé la courbe Précision-Rappel.\nPrécision = Vrais positifs/ positifs (vp + fp)\nRappel = Vrais positifs / Bons prédits (vp + vn)"
  },
  {
    "objectID": "src/seminaire-dms/index.html#valeurs-de-lindicatrice-qualité",
    "href": "src/seminaire-dms/index.html#valeurs-de-lindicatrice-qualité",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Valeurs de l’indicatrice qualité",
    "text": "Valeurs de l’indicatrice qualité\n\n\n\nValeur\nidGaïa maximum retrouvé\n\n\n\n\n6 à 10\nidAdresse\n\n\n3 à 5\nidVoie\n\n\n2\nidCommune\n\n\n0 à 1\nAucun"
  },
  {
    "objectID": "src/seminaire-dms/index.html#distance-entre-la-1ère-et-la-2ème-voie-la-plus-pertinente",
    "href": "src/seminaire-dms/index.html#distance-entre-la-1ère-et-la-2ème-voie-la-plus-pertinente",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Distance entre la 1ère et la 2ème voie la plus pertinente",
    "text": "Distance entre la 1ère et la 2ème voie la plus pertinente\n\\[\n\\text{ratio} = 1 - \\frac{R_2}{R_1}\n\\]\nR1 = score Elastic de la 1ère voie la plus pertinente (voie retournée).\nR2 = score Elastic de la 2ème voie la plus pertinente.\nRatio → 1 ⇔ le résultat retourné est loin de la 2ème proposition.\n\nMaintenant qu’on a en tete l’algorithme d’identification d’adresse de Gaia, quelles sont ses performances concrètement ?"
  },
  {
    "objectID": "src/seminaire-dms/index.html#constitution-dun-jeu-de-test",
    "href": "src/seminaire-dms/index.html#constitution-dun-jeu-de-test",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Constitution d’un jeu de test",
    "text": "Constitution d’un jeu de test\n\nIdée : avoir des adresses avec des variations textuelles et leur idGaïaAdresse associé (vérité).\n\nLe jeu de test est une suite d’appariements de sources de données :\n\nPASRAU : Prélèvement À la Source sur les Revenus AUtres.\n\nTSSAL : Base tous salariés, issue de la déclaration sociale nominative.\n\nFidéli : FIchiers DÉmographiques sur les Logements et les Individus."
  },
  {
    "objectID": "src/seminaire-dms/index.html#schéma-appariements-jeu-de-test",
    "href": "src/seminaire-dms/index.html#schéma-appariements-jeu-de-test",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Schéma appariements jeu de test",
    "text": "Schéma appariements jeu de test\n\n\n\nPASRAU : Ce sont des données administratives générées par le prélèvement à la source sur les retraites et d’autres revenus (mais pas les salaires).\nAdresses du PASRAU et Tous Salariés (TTSAL) avec le CSNS de l’individu connu pour chaque adresse.\n\nGrâce aux CSNS des individus Fidéli 2022, obtention de l’identifiant Majic de ces adresses.\nAvec l’identifiant Majic des adresses, conservé dans le référentiel Gaïa, on retrouve l’idGaïaAdresse.\n\nValidation post-appariements des paires adresse non normalisée (PASRAU, TSSAL)) + idGaïaAdresse.\n\n\n\n\nMaintenant qu’on a le jeu de test, on peut evaluer l’algo."
  },
  {
    "objectID": "src/seminaire-dms/index.html#évaluation-de-lalgorithme-didentification",
    "href": "src/seminaire-dms/index.html#évaluation-de-lalgorithme-didentification",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Évaluation de l’algorithme d’identification",
    "text": "Évaluation de l’algorithme d’identification\nPour 100 000 adresses issues du jeu de test sur tout le territoire français :\n\n\n\n\n\n\n\n\n\n\nAdresse trouvée\nVoie trouvée\nCommune trouvée/rien trouvé\n\n\n\n\nPourcentage\n86,0%\n99,5%\n0,5%\n\n\nPrécision\n0.94\n0.94\nx\n\n\n\nAppariement direct avec filtres entre adresses à retrouver et référentiel Gaïa : 30% d’identification à l’adresse.\n\n\nPrécision = Vrais positifs/ positifs (vp + fp)\nA titre de comparaison, un appariement direct entre les adresses à retrouver et le référentiel Gaïa donnerait 30% d’identification à condition que les filtres présentés précédemment soient appliqués.\nLe reste des adresses doivent être retrouvées avec du flou, ce qui est très long dans une bdd standard.\nDonc ce qui justifie l’utilisation d’un moteur en terme de précision mais aussi en terme de performances temporelles, notamment grace à l’index inversé."
  },
  {
    "objectID": "src/seminaire-dms/index.html#rapidité-de-lalgorithme",
    "href": "src/seminaire-dms/index.html#rapidité-de-lalgorithme",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Rapidité de l’algorithme",
    "text": "Rapidité de l’algorithme\n\n500 adresses en 2 secondes.\n\nIdentification de gros paquets d’adresses : 1 million d’adresses en 50 minutes.\nDémonstration en direct du moteur ⚙️ ElasticSearch développé en Python.\n\n\n{ “adresseComplete”: “48 rue fontaine”, “depcom”: ““,”codePostal”: “14530”, “libelleCommune”: “luc s/mer” }"
  },
  {
    "objectID": "src/seminaire-dms/index.html#limites",
    "href": "src/seminaire-dms/index.html#limites",
    "title": "Identification d’adresses avec ElasticSearch",
    "section": "Limites",
    "text": "Limites\n\nCompétences requises pour le développement et la maintenance du moteur ElasticSearch.\n\nMoteur créé par l’EPS en Python, réécrit en Java par l’EPI.\n\nLes travaux ont été effectués sur un référentiel contenant des erreurs/doublons → entrave les métriques qualité."
  },
  {
    "objectID": "src/documentation/index.html",
    "href": "src/documentation/index.html",
    "title": "Accueil de la documentation",
    "section": "",
    "text": "Informations de connexion via Filezilla en protocole FTP (connexion FTP simple) disponibles ici.\nPour requêter le service d’identification, il faut que l’utilisateur soit authentifié en ayant récupéré un jeton Keycloak au préalable et qu’il bénéficie du rôle IDENTIFICATION_GAIA. Si ce n’est pas le cas, contactez l’équipe Gaïa sur Tchap ou mail.\n\n\n\nPour lancer une identification avec le moteur ElasticSearch développé en python, il faut aller sur le dépôt git et lire le README. Il est possible d’accéder au dépôt en cliquant ici Moteur de recherche Gaïa. Puis aller sur LS3 pour cloner le projet.\n⚠️ Attention : il faut avoir les droits pour accéder au dépôt et être dans le projet LS3. Si ce n’est pas le cas, contactez l’équipe Gaïa sur Tchap ou mail.",
    "crumbs": [
      "Accueil",
      "Navigation",
      "Accueil"
    ]
  },
  {
    "objectID": "src/documentation/index.html#recherche-simple-les-swaggers",
    "href": "src/documentation/index.html#recherche-simple-les-swaggers",
    "title": "Accueil de la documentation",
    "section": "",
    "text": "Informations de connexion via Filezilla en protocole FTP (connexion FTP simple) disponibles ici.\nPour requêter le service d’identification, il faut que l’utilisateur soit authentifié en ayant récupéré un jeton Keycloak au préalable et qu’il bénéficie du rôle IDENTIFICATION_GAIA. Si ce n’est pas le cas, contactez l’équipe Gaïa sur Tchap ou mail.",
    "crumbs": [
      "Accueil",
      "Navigation",
      "Accueil"
    ]
  },
  {
    "objectID": "src/documentation/index.html#recherche-avancée-code-python",
    "href": "src/documentation/index.html#recherche-avancée-code-python",
    "title": "Accueil de la documentation",
    "section": "",
    "text": "Pour lancer une identification avec le moteur ElasticSearch développé en python, il faut aller sur le dépôt git et lire le README. Il est possible d’accéder au dépôt en cliquant ici Moteur de recherche Gaïa. Puis aller sur LS3 pour cloner le projet.\n⚠️ Attention : il faut avoir les droits pour accéder au dépôt et être dans le projet LS3. Si ce n’est pas le cas, contactez l’équipe Gaïa sur Tchap ou mail.",
    "crumbs": [
      "Accueil",
      "Navigation",
      "Accueil"
    ]
  },
  {
    "objectID": "src/seminaire-dms-video/index.html",
    "href": "src/seminaire-dms-video/index.html",
    "title": "Vidéo du séminaire interne DMS du 28 novembre 2024",
    "section": "",
    "text": "Vidéo du séminaire interne DMS du 28 novembre 2024\n\n\n\nVotre navigateur ne supporte pas la balise vidéo."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Moteur de recherche d’adresses Gaïa",
    "section": "",
    "text": "Moteur de recherche d’adresses Gaïa\n\n\n\n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            Documentation\n            \n\n            \n              Description : Ici est rassemblée toute la documentation technique sur le moteur de recherche d'adresse textuel Gaïa\n\n            \n\n            \n            \n              \n                Raya Berova\n                Jul 7, 2025\n              \n            \n            \n            \n              \n              \n                \n                  \n                    \n                      \n                        Doc\n                      \n                    \n                  \n                \n              \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            Séminaire interne DMS\n            \n\n            \n              Description : Ce séminaire a pour but de présenter le moteur de recherche d'adresse Gaïa et de diffuser les connaissances sur ElasticSearch au sein de l'Insee.\n\n            \n\n            \n            \n              \n                Raya Berova & Benoît Hurpeau\n                Nov 28, 2024\n              \n            \n            \n            \n              \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n              \n              \n                \n                  \n                    \n                      \n                        Vidéo\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            Abstract NTTS 2025 (Eurostat)\n            \n\n            \n              Description : Abstract en anglais soumis à NTTS 2025.\n\n            \n\n            \n            \n              \n                Raya Berova\n                Oct 1, 2024\n              \n            \n            \n            \n              \n              \n                \n                  \n                    \n                      \n                        pdf\n                      \n                    \n                  \n                \n              \n              \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n\n\nNo matching items"
  }
]